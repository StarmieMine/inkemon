<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Inkémon - Cutting-Edge Products</title>
    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <!-- EmailJS SDK -->
    <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/@emailjs/browser@4/dist/email.min.js"></script>
    <!-- Razorpay Checkout SDK -->
    <script src="https://checkout.razorpay.com/v1/checkout.js"></script>
    <!-- Google Identity Services Library -->
    <script src="https://accounts.google.com/gsi/client" async defer></script>
    <!-- Firebase SDKs -->
    <script type="module">
        // Import the functions you need from the SDKs you need
        import { initializeApp } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-app.js";
        import { getAuth, onAuthStateChanged, GoogleAuthProvider, signInWithPopup, signOut } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-auth.js";
        import { getFirestore, doc, getDoc, setDoc, updateDoc, collection, query, where, addDoc, getDocs, deleteDoc } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-firestore.js";

        // Firebase configuration and initialization (provided by the environment)
        const appId = typeof __app_id !== 'undefined' ? __app_id : 'default-app-id';
        const firebaseConfig = typeof __firebase_config !== 'undefined' ? JSON.parse(__firebase_config) : {};

        // Initialize Firebase
        const app = initializeApp(firebaseConfig);
        const db = getFirestore(app);
        const auth = getAuth(app);

        // Expose Firebase objects to the global scope for use in the main script
        window.firebaseApp = app;
        window.firebaseDb = db;
        window.firebaseAuth = auth;
        window.GoogleAuthProvider = GoogleAuthProvider;
        window.signInWithPopup = signInWithPopup;
        window.signOut = signOut;
        window.onAuthStateChanged = onAuthStateChanged;
        window.firebaseFirestore = { doc, getDoc, setDoc, updateDoc, collection, query, where, addDoc, getDocs, deleteDoc };
        window.appId = appId; // Expose appId globally
    </script>

    <script type="text/javascript">
        (function() {
            // Initialize EmailJS with your Public Key
            emailjs.init({
                publicKey: "6AqidffnKSYnoEckD", // Your EmailJS Public Key
            });
        })();
    </script>
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #000; /* Deep black background for the entire page */
            color: #e2e8f0; /* Light text color */
        }
        /* Custom scrollbar for better aesthetics */
        ::-webkit-scrollbar {
            width: 8px;
        }
        ::-webkit-scrollbar-track {
            background: #1a202c;
        }
        ::-webkit-scrollbar-thumb {
            background: #4a5568;
            border-radius: 4px;
        }
        ::-webkit-scrollbar-thumb:hover {
            background: #64748b;
        }
        .page-section {
            display: none; /* Hidden by default */
        }
        .page-section.active {
            display: block; /* Shown when active */
        }
        .accordion-header {
            cursor: pointer;
            padding: 1rem;
            border-bottom: 1px solid #2d3748;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        .accordion-content {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.3s ease-out;
            padding: 0 1rem;
        }
        .accordion-content.open {
            max-height: 200px; /* Adjust as needed, or calculate dynamically */
            padding-bottom: 1rem;
        }
        .accordion-header .arrow {
            transition: transform 0.3s ease-out;
        }
        .accordion-header.active .arrow {
            transform: rotate(180deg);
        }

        /* Aesthetic animation for Hero Section - More vibrant blues */
        .hero-animated-bg {
            background: radial-gradient(circle at top left, #007bff, #000 50%, #00c2ff); /* Vibrant blue gradient */
            background-size: 200% 200%;
            animation: gradientShift 15s ease infinite alternate;
        }

        @keyframes gradientShift {
            0% { background-position: 0% 0%; }
            50% { background-position: 100% 100%; }
            100% { background-position: 0% 0%; }
        }

        /* Ensure product cards have a consistent hover effect */
        .product-card:hover {
            transform: scale(1.03);
            box-shadow: 0 10px 15px -3px rgba(0, 123, 255, 0.5), 0 4px 6px -2px rgba(0, 123, 255, 0.5); /* Blue shadow on hover */
        }

        /* Toast message for cart additions */
        .toast {
            visibility: hidden;
            min-width: 250px;
            background-color: #333;
            color: #fff;
            text-align: center;
            border-radius: 8px;
            padding: 16px;
            position: fixed;
            z-index: 1000;
            left: 50%;
            bottom: 30px;
            transform: translateX(-50%);
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
        }

        .toast.show {
            visibility: visible;
            animation: fadeIn 0.5s, fadeOut 0.5s 9.5s; /* Fade out after 9.5s for total 10s display */
        }

        @keyframes fadeIn {
            from {bottom: 0; opacity: 0;}
            to {bottom: 30px; opacity: 1;}
        }

        @keyframes fadeOut {
            from {bottom: 30px; opacity: 1;}
            to {bottom: 0; opacity: 0;}
        }

        /* Modal Pop-up Styles */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.75);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 1000;
        }

        .modal-content {
            background-color: #1a202c; /* Dark background */
            border-radius: 0.75rem; /* rounded-xl */
            padding: 2rem;
            max-width: 28rem; /* max-w-md */
            width: 90%;
            text-align: center;
            position: relative;
            border: 2px solid #2563eb; /* border-blue-600 */
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
        }

        .modal-title {
            font-size: 2.25rem; /* text-3xl */
            font-weight: 700; /* font-bold */
            color: #60a5fa; /* text-blue-400 */
            margin-bottom: 1rem;
        }

        .modal-text {
            color: #d1d5db; /* text-gray-300 */
            font-size: 1.125rem; /* text-lg */
            margin-bottom: 1.5rem;
        }

        .modal-close-btn {
            position: absolute;
            top: 1rem;
            right: 1rem;
            color: #9ca3af; /* text-gray-400 */
            transition: color 0.2s ease-in-out;
            cursor: pointer;
        }

        .modal-close-btn:hover {
            color: #ffffff; /* hover:text-white */
        }

        .modal-action-btn {
            background-color: #2563eb; /* bg-blue-600 */
            color: #ffffff;
            padding: 0.75rem 1.5rem; /* px-6 py-3 */
            border-radius: 0.5rem; /* rounded-lg */
            font-size: 1.125rem; /* text-lg */
            font-weight: 600; /* font-semibold */
            transition: background-color 0.3s ease-in-out, transform 0.2s ease-in-out, box-shadow 0.2s ease-in-out;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
        }

        .modal-action-btn:hover {
            background-color: #1d4ed8; /* hover:bg-blue-700 */
            transform: translateY(-2px);
            box-shadow: 0 6px 10px -1px rgba(0, 0, 0, 0.15), 0 3px 6px -1px rgba(0, 0, 0, 0.08);
        }

        /* Styles for the Login Modal */
        #login-modal {
            background-color: rgba(0, 0, 0, 0.8);
        }
        #login-modal .modal-content {
            max-width: 24rem;
        }
    </style>
</head>
<body class="min-h-screen flex flex-col">

    <!-- Header -->
    <header class="bg-black text-white shadow-lg sticky top-0 z-50 border-b-2 border-blue-600">
        <nav class="container mx-auto pl-4 py-3 flex items-center justify-between space-x-6">
            <!-- Logo and Navigation Links Group -->
            <div class="flex items-center space-x-3 cursor-pointer" onclick="showPage('home-page')">
                <!-- Logo - Using your GitHub Pages image URL -->
                <div class="p-2 bg-blue-600 rounded-full overflow-hidden flex items-center justify-center">
                    <img src="https://starmiemine.github.io/inkemon/images/my_thing.png" alt="Inkémon Logo" class="w-12 h-12 object-cover rounded-full">
                </div>
                <span class="text-2xl font-bold text-blue-400">Inkémon</span>
            </div>
            <!-- Navigation Links - Now directly beside the logo group for desktop, no outer box -->
            <div class="hidden md:flex items-center space-x-4">
                <a href="#" class="nav-link text-lg px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors duration-300" data-page="home">Home</a>
                <a href="#" class="nav-link text-lg px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors duration-300" data-page="products">Products</a>
                <a href="#" class="nav-link text-lg px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors duration-300" data-page="faq">FAQ</a>
                <a href="#" class="nav-link text-lg px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors duration-300 hidden" id="order-history-nav" data-page="order-history">Order History</a>
                <a href="#" class="nav-link text-lg px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors duration-300" data-page="admin-panel">Admin Panel</a>
            </div>
            <!-- Auth and Cart Buttons -->
            <div class="flex items-center space-x-4">
                <div id="auth-status" class="text-sm text-gray-400">Not logged in</div>
                <button id="auth-button" class="px-3 py-1 bg-blue-500 text-white rounded-md hover:bg-blue-600 transition-colors duration-300">Login</button>
                <a href="#" class="nav-link text-lg px-4 py-2 rounded-lg bg-blue-600 hover:bg-blue-700 transition-colors duration-300 flex items-center space-x-2" data-page="cart">
                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-shopping-cart">
                        <circle cx="8" cy="21" r="1"/><circle cx="19" cy="21" r="1"/><path d="M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12"/>
                    </svg>
                    <span>Cart (<span id="cart-count">0</span>)</span>
                </a>
                <div class="md:hidden">
                    <button id="mobile-menu-button" class="text-white focus:outline-none">
                        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16m-7 6h7"></path>
                        </svg>
                    </button>
                </div>
            </div>
        </nav>
        <!-- Mobile Menu -->
        <div id="mobile-menu" class="hidden md:hidden bg-gray-900 py-2">
            <a href="#" class="block px-4 py-2 text-lg hover:bg-blue-700 transition-colors duration-300 nav-link" data-page="home">Home</a>
            <a href="#" class="block px-4 py-2 text-lg hover:bg-blue-700 transition-colors duration-300 nav-link" data-page="products">Products</a>
            <a href="#" class="block px-4 py-2 text-lg hover:bg-blue-700 transition-colors duration-300 nav-link" data-page="faq">FAQ</a>
            <a href="#" class="block px-4 py-2 text-lg hover:bg-blue-700 transition-colors duration-300 hidden" id="mobile-order-history-nav" data-page="order-history">Order History</a>
            <a href="#" class="block px-4 py-2 text-lg hover:bg-blue-700 transition-colors duration-300" data-page="admin-panel">Admin Panel</a>
        </div>
    </header>

    <!-- Main Content Area -->
    <main class="flex-grow">
        <!-- Home Page Section -->
        <section id="home-page" class="page-section active">
            <!-- Hero Section - Added hero-animated-bg class -->
            <div class="hero-animated-bg text-white py-20 md:py-32 text-center rounded-b-xl shadow-lg overflow-hidden">
                <div class="container mx-auto px-4">
                    <h1 class="text-4xl md:text-6xl font-extrabold mb-4 leading-tight">
                        Discover Our <span class="text-blue-400">Cutting-Edge</span> Products.
                    </h1>
                    <p class="text-lg md:text-xl text-blue-200 mb-8">
                        Engineered for precision, designed for tomorrow.
                    </p>
                    <!-- New button to navigate to products page (all products) -->
                    <div class="flex flex-col sm:flex-row justify-center items-center gap-4">
                        <button class="nav-link bg-blue-600 text-white px-8 py-4 rounded-full text-lg font-semibold hover:bg-blue-700 transition-colors duration-300 shadow-lg transform hover:scale-105" data-page="products">
                            Shop All Products
                        </button>
                    </div>
                </div>
            </div>

            <!-- Features Section -->
            <div class="bg-gray-900 py-16">
                <div class="container mx-auto px-4 grid grid-cols-1 md:grid-cols-2 gap-8 text-center">
                    <div class="flex flex-col items-center p-6 bg-gray-800 rounded-xl shadow-lg">
                        <div class="p-4 bg-blue-600 rounded-full mb-4">
                            <svg xmlns="http://www.w3.org/2000/svg" width="36" height="36" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-shield-check text-white">
                                <path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10"/>
                                <path d="m9 12 2 2 4-4"/>
                            </svg>
                        </div>
                        <h3 class="text-xl font-semibold mb-2">Secure Payment</h3>
                        <p class="text-gray-400">100% secure payment processing</p>
                    </div>
                    <div class="flex flex-col items-center p-6 bg-gray-800 rounded-xl shadow-lg">
                        <div class="p-4 bg-blue-600 rounded-full mb-4">
                            <!-- Headphone icon for 24/7 Support -->
                            <svg xmlns="http://www.w3.org/2000/svg" width="36" height="36" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-headphones text-white">
                                <path d="M18 10c0 7-6 9-9 9s-9-2-9-9V3h18v7Z"/>
                                <path d="M2 17v-2a9 9 0 0 1 18 0v2"/>
                            </svg>
                        </div>
                        <h3 class="text-xl font-semibold mb-2">24/7 Support</h3>
                        <p class="text-gray-400">Round-the-clock customer support</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- Products Page Section -->
        <section id="products-page" class="page-section">
            <div class="container mx-auto px-4 py-12">
                <h2 class="text-4xl font-bold text-center mb-4 text-blue-400">Our <span class="text-white">Products</span></h2>
                <p class="text-lg text-center text-gray-400 mb-12">
                    Explore our exquisite collection of collectibles.
                </p>
                <div class="flex flex-col md:flex-row items-center justify-between mb-8 space-y-4 md:space-y-0">
                    <input type="text" id="product-search-input" placeholder="Search products..." class="w-full md:w-1/3 p-3 rounded-lg bg-gray-800 border border-gray-700 focus:outline-none focus:border-blue-500 text-white placeholder-gray-400">
                    <div class="flex flex-wrap justify-center md:justify-end gap-3">
                        <button class="filter-button px-5 py-2 rounded-lg bg-blue-600 hover:bg-blue-700 transition-colors duration-300 text-white font-medium" data-category="all">All</button>
                        <button class="filter-button px-5 py-2 rounded-lg bg-gray-800 hover:bg-gray-700 transition-colors duration-300 text-gray-300 font-medium" data-category="demon-slayer">Demon Slayer</button>
                        <button class="filter-button px-5 py-2 rounded-lg bg-gray-800 hover:bg-gray-700 transition-colors duration-300 text-gray-300 font-medium" data-category="pokemon">Pokemon</button>
                    </div>
                </div>

                <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-8" id="product-list">
                    <!-- Demon Slayer Product Card -->
                    <div class="product-card bg-gray-800 rounded-xl shadow-lg overflow-hidden p-6 relative transition-transform duration-300 hover:scale-103 hover:shadow-blue-500/50" data-category="demon-slayer">
                        <button class="absolute top-4 right-4 text-gray-400 hover:text-red-500 transition-colors duration-200">
                            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-heart">
                                <path d="M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z"/>
                            </svg>
                        </button>
                        <div class="w-full h-48 bg-gray-700 flex items-center justify-center rounded-lg mb-4">
                            <img src="https://starmiemine.github.io/inkemon/images/demon_slayer_card.png" alt="Demon Slayer Collectible Card" class="w-auto h-full object-contain rounded-lg">
                        </div>
                        <h3 class="text-xl font-semibold mb-2">Demon Slayer: Kimetsu no Yaiba Collectible Card</h3>
                        <p class="text-gray-400 text-sm mb-2">
                            Unleash your inner demon slayer with this exclusive collectible card from Kimetsu no Yaiba! Featuring your favorite characters, this card is a must-have for any fan.
                            #DemonSlayer #KimetsuNoYaiba #AnimeCard #Collectible #Manga #Tanjiro #Nezuko
                        </p>
                        <p class="text-gray-400 mb-4">₹180</p>
                        <button class="w-full bg-blue-600 text-white py-3 rounded-lg hover:bg-blue-700 transition-colors duration-300 shadow-md add-to-cart" data-name="Demon Slayer Collectible Card" data-price="180">Add to Cart</button>
                    </div>

                    <!-- New Pokemon Products from uploaded images -->
                    <div class="product-card bg-gray-800 rounded-xl shadow-lg overflow-hidden p-6 relative transition-transform duration-300 hover:scale-103 hover:shadow-blue-500/50" data-category="pokemon">
                        <button class="absolute top-4 right-4 text-gray-400 hover:text-red-500 transition-colors duration-200">
                            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-heart">
                                <path d="M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z"/>
                            </svg>
                        </button>
                        <div class="w-full h-48 bg-gray-700 flex items-center justify-center rounded-lg mb-4">
                            <img src="https://starmiemine.github.io/inkemon/images/bellsprout.png" alt="Bellsprout Pokemon Card" class="w-auto h-full object-contain rounded-lg">
                        </div>
                        <h3 class="text-xl font-semibold mb-2">Bellsprout Pokémon TCG Card - Common</h3>
                        <p class="text-gray-400 text-sm mb-2">
                            Add this charming Bellsprout card to your Pokémon TCG collection! Perfect for fans and collectors, this common card features vibrant artwork and is ready for battle or display.
                            #PokemonTCG #Bellsprout #PokemonCard #Collectible #Gaming #PokemonCommunity
                        </p>
                        <p class="text-gray-400 mb-4">₹100</p>
                        <button class="w-full bg-blue-600 text-white py-3 rounded-lg hover:bg-blue-700 transition-colors duration-300 shadow-md add-to-cart" data-name="Bellsprout Pokémon TCG Card" data-price="100">Add to Cart</button>
                    </div>

                    <div class="product-card bg-gray-800 rounded-xl shadow-lg overflow-hidden p-6 relative transition-transform duration-300 hover:scale-103 hover:shadow-blue-500/50" data-category="pokemon">
                        <button class="absolute top-4 right-4 text-gray-400 hover:text-red-500 transition-colors duration-200">
                            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-heart">
                                <path d="M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z"/>
                            </svg>
                        </button>
                        <div class="w-full h-48 bg-gray-700 flex items-center justify-center rounded-lg mb-4">
                            <img src="https://starmiemine.github.io/inkemon/images/butterfree.png" alt="Butterfree Pokemon Card" class="w-auto h-full object-contain rounded-lg">
                        </div>
                        <h3 class="text-xl font-semibold mb-2">Butterfree Pokémon TCG Card - Stage 2</h3>
                        <p class="text-gray-400 text-sm mb-2">
                            Elevate your Pokémon team with this beautiful Butterfree Stage 2 evolution card! Featuring stunning artwork and powerful moves, it's a must-have for any serious trainer or collector.
                            #PokemonTCG #Butterfree #EvolutionCard #RarePokemon #CardCollector #PokemonFan
                        </p>
                        <p class="text-gray-400 mb-4">₹120</p>
                        <button class="w-full bg-blue-600 text-white py-3 rounded-lg hover:bg-blue-700 transition-colors duration-300 shadow-md add-to-cart" data-name="Butterfree Pokémon TCG Card" data-price="120">Add to Cart</button>
                    </div>

                    <div class="product-card bg-gray-800 rounded-xl shadow-lg overflow-hidden p-6 relative transition-transform duration-300 hover:scale-103 hover:shadow-blue-500/50" data-category="pokemon">
                        <button class="absolute top-4 right-4 text-gray-400 hover:text-red-500 transition-colors duration-200">
                            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-heart">
                                <path d="M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z"/>
                            </svg>
                        </button>
                        <div class="w-full h-48 bg-gray-700 flex items-center justify-center rounded-lg mb-4">
                            <img src="https://starmiemine.github.io/inkemon/images/chatot.png" alt="Chatot Pokemon Card" class="w-auto h-full object-contain rounded-lg">
                        </div>
                        <h3 class="text-xl font-semibold mb-2">Chatot Pokémon TCG Card - Basic</h3>
                        <p class="text-gray-400 text-sm mb-2">
                            Bring the melody to your battles with this charming Chatot Basic Pokémon card! A delightful addition for any collector, featuring unique abilities for your deck.
                            #PokemonTCG #Chatot #BasicPokemon #MusicNotePokemon #CardGame #PokemonCollector
                        </p>
                        <p class="text-gray-400 mb-4">₹100</p>
                        <button class="w-full bg-blue-600 text-white py-3 rounded-lg hover:bg-blue-700 transition-colors duration-300 shadow-md add-to-cart" data-name="Chatot Pokémon TCG Card" data-price="100">Add to Cart</button>
                    </div>

                    <div class="product-card bg-gray-800 rounded-xl shadow-lg overflow-hidden p-6 relative transition-transform duration-300 hover:scale-103 hover:shadow-blue-500/50" data-category="pokemon">
                        <button class="absolute top-4 right-4 text-gray-400 hover:text-red-500 transition-colors duration-200">
                            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-heart">
                                <path d="M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z"/>
                            </svg>
                        </button>
                        <div class="w-full h-48 bg-gray-700 flex items-center justify-center rounded-lg mb-4">
                            <img src="https://starmiemine.github.io/inkemon/images/exeggcute.png" alt="Exeggcute Pokemon Card" class="w-auto h-full object-contain rounded-lg">
                        </div>
                        <h3 class="text-xl font-semibold mb-2">Exeggcute Pokémon TCG Card - Basic</h3>
                        <p class="text-gray-400 text-sm mb-2">
                            Crack open a new strategy with this Exeggcute Basic Pokémon card! A quirky and fun addition to any Pokémon TCG collection, featuring its iconic cluster design.
                            #PokemonTCG #Exeggcute #BasicPokemon #EggPokemon #CardCollecting #PokemonCards
                        </p>
                        <p class="text-gray-400 mb-4">₹110</p>
                        <button class="w-full bg-blue-600 text-white py-3 rounded-lg hover:bg-blue-700 transition-colors duration-300 shadow-md add-to-cart" data-name="Exeggcute Pokémon TCG Card" data-price="110">Add to Cart</button>
                    </div>

                    <div class="product-card bg-gray-800 rounded-xl shadow-lg overflow-hidden p-6 relative transition-transform duration-300 hover:scale-103 hover:shadow-blue-500/50" data-category="pokemon">
                        <button class="absolute top-4 right-4 text-gray-400 hover:text-red-500 transition-colors duration-200">
                            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-heart">
                                <path d="M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z"/>
                            </svg>
                        </button>
                        <div class="w-full h-48 bg-gray-700 flex items-center justify-center rounded-lg mb-4">
                            <img src="https://starmiemine.github.io/inkemon/images/hitmonchan.png" alt="Hitmonchan Pokemon Card" class="w-auto h-full object-contain rounded-lg">
                        </div>
                        <h3 class="text-xl font-semibold mb-2">Hitmonchan Pokémon TCG Card - Basic</h3>
                        <p class="text-gray-400 text-sm mb-2">
                            Unleash powerful punches with this dynamic Hitmonchan Basic Pokémon card! A fighting-type favorite, perfect for adding strength to your Pokémon TCG deck.
                            #PokemonTCG #Hitmonchan #FightingPokemon #BasicCard #PokemonBattles #TrainerCard
                        </p>
                        <p class="text-gray-400 mb-4">₹130</p>
                        <button class="w-full bg-blue-600 text-white py-3 rounded-lg hover:bg-blue-700 transition-colors duration-300 shadow-md add-to-cart" data-name="Hitmonchan Pokémon TCG Card" data-price="130">Add to Cart</button>
                    </div>

                    <div class="product-card bg-gray-800 rounded-xl shadow-lg overflow-hidden p-6 relative transition-transform duration-300 hover:scale-103 hover:shadow-blue-500/50" data-category="pokemon">
                        <button class="absolute top-4 right-4 text-gray-400 hover:text-red-500 transition-colors duration-200">
                            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-heart">
                                <path d="M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z"/>
                            </svg>
                        </button>
                        <div class="w-full h-48 bg-gray-700 flex items-center justify-center rounded-lg mb-4">
                            <img src="https://starmiemine.github.io/inkemon/images/lapras.png" alt="Lapras Pokemon Card" class="w-auto h-full object-contain rounded-lg">
                        </div>
                        <h3 class="text-xl font-semibold mb-2">Lapras Pokémon TCG Card - Basic</h3>
                        <p class="text-gray-400 text-sm mb-2">
                            Glide through your battles with this stunning Lapras Basic Pokémon card! A beloved Water-type, perfect for adding a touch of elegance and power to your collection.
                            #PokemonTCG #Lapras #WaterPokemon #BasicCard #PokemonCollector #RareFind
                        </p>
                        <p class="text-gray-400 mb-4">₹150</p>
                        <button class="w-full bg-blue-600 text-white py-3 rounded-lg hover:bg-blue-700 transition-colors duration-300 shadow-md add-to-cart" data-name="Lapras Pokémon TCG Card" data-price="150">Add to Cart</button>
                    </div>

                    <div class="product-card bg-gray-800 rounded-xl shadow-lg overflow-hidden p-6 relative transition-transform duration-300 hover:scale-103 hover:shadow-blue-500/50" data-category="pokemon">
                        <button class="absolute top-4 right-4 text-gray-400 hover:text-red-500 transition-colors duration-200">
                            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-heart">
                                <path d="M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z"/>
                            </svg>
                        </button>
                        <div class="w-full h-48 bg-gray-700 flex items-center justify-center rounded-lg mb-4">
                            <img src="https://starmiemine.github.io/inkemon/images/seaking.png" alt="Seaking Pokemon Card" class="w-auto h-full object-contain rounded-lg">
                        </div>
                        <h3 class="text-xl font-semibold mb-2">Seaking Pokémon TCG Card - Stage 1</h3>
                        <p class="text-gray-400 text-sm mb-2">
                            Rule the waters with this majestic Seaking Stage 1 evolution card! A powerful addition to any water-themed deck, featuring vibrant artwork.
                            #PokemonTCG #Seaking #WaterType #EvolutionCard #PokemonFan #TradingCard
                        </p>
                        <p class="text-400 mb-4">₹100</p>
                        <button class="w-full bg-blue-600 text-white py-3 rounded-lg hover:bg-blue-700 transition-colors duration-300 shadow-md add-to-cart" data-name="Seaking Pokémon TCG Card" data-price="100">Add to Cart</button>
                    </div>

                    <div class="product-card bg-gray-800 rounded-xl shadow-lg overflow-hidden p-6 relative transition-transform duration-300 hover:scale-103 hover:shadow-blue-500/50" data-category="pokemon">
                        <button class="absolute top-4 right-4 text-gray-400 hover:text-red-500 transition-colors duration-200">
                            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-heart">
                                <path d="M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z"/>
                            </svg>
                        </button>
                        <div class="w-full h-48 bg-gray-700 flex items-center justify-center rounded-lg mb-4">
                            <img src="https://starmiemine.github.io/inkemon/images/staryu.png" alt="Staryu Pokemon Card" class="w-auto h-full object-contain rounded-lg">
                        </div>
                        <h3 class="text-xl font-semibold mb-2">Staryu Pokémon TCG Card - Basic</h3>
                        <p class="text-gray-400 text-sm mb-2">
                            Shine bright with this sparkling Staryu Basic Pokémon card! A classic water-type, perfect for any Pokémon TCG player or collector.
                            #PokemonTCG #Staryu #WaterPokemon #BasicCard #PokemonCollection #CardGame
                        </p>
                        <p class="text-gray-400 mb-4">₹100</p>
                        <button class="w-full bg-blue-600 text-white py-3 rounded-lg hover:bg-blue-700 transition-colors duration-300 shadow-md add-to-cart" data-name="Staryu Pokémon TCG Card" data-price="100">Add to Cart</button>
                    </div>
                </div>
            </div>
        </section>

        <!-- Cart Page Section -->
        <section id="cart-page" class="page-section">
            <div class="container mx-auto px-4 py-12">
                <h2 class="text-4xl font-bold text-center mb-8 text-blue-400">Your <span class="text-white">Cart</span></h2>

                <div class="flex flex-col lg:flex-row gap-8">
                    <!-- Cart Items List -->
                    <div class="lg:w-2/3 bg-gray-800 rounded-xl shadow-lg p-6">
                        <h3 class="text-2xl font-semibold mb-6 text-white border-b border-gray-700 pb-4">Shopping Cart</h3>
                        <div id="cart-items-container" class="space-y-6">
                            <!-- Cart items will be rendered here by JavaScript -->
                            <p id="empty-cart-message" class="text-gray-400 text-center text-lg">Your cart is empty.</p>
                        </div>
                    </div>

                    <!-- Order Summary -->
                    <div class="lg:w-1/3 bg-gray-800 rounded-xl shadow-lg p-6 h-fit">
                        <h3 class="text-2xl font-semibold mb-6 text-white border-b border-gray-700 pb-4">Order Summary</h3>
                        <div class="space-y-4 text-lg">
                            <div class="flex justify-between items-center">
                                <span class="text-gray-300">Subtotal:</span>
                                <span class="font-medium text-white">₹<span id="cart-subtotal">0</span></span>
                            </div>
                            <div class="flex justify-between items-center">
                                <span class="text-gray-300">Shipping:</span>
                                <span class="font-medium text-white">₹<span id="cart-shipping">0</span></span>
                            </div>
                            <div class="border-t border-gray-700 pt-4 mt-4 flex justify-between items-center text-xl font-bold">
                                <span class="text-blue-400">Total:</span>
                                <span class="text-white">₹<span id="cart-total">0</span></span>
                            </div>
                            <p class="text-red-500 text-sm mt-4">Only UPI (Paytm, PhonePe) available.</p>
                        </div>
                        <button id="proceed-to-checkout-btn" class="w-full bg-blue-600 text-white py-3 rounded-lg hover:bg-blue-700 transition-colors duration-300 shadow-md mt-8 text-lg font-semibold" disabled>Proceed to Checkout</button>
                        <p id="login-required-message" class="text-yellow-400 text-center text-sm mt-2">Login to proceed to checkout</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- Transaction Menu Page Section -->
        <section id="transaction-menu-page" class="page-section">
            <div class="container mx-auto px-4 py-12">
                <h2 class="text-4xl font-bold text-center mb-8 text-blue-400">Complete Your <span class="text-white">Purchase</span></h2>

                <div class="flex flex-col lg:flex-row gap-8">
                    <!-- Order Details -->
                    <div class="lg:w-2/3 bg-gray-800 rounded-xl shadow-lg p-6">
                        <h3 class="text-2xl font-semibold mb-6 text-white border-b border-gray-700 pb-4">Order Details</h3>
                        <div id="transaction-items-container" class="space-y-4">
                            <!-- Transaction items will be rendered here by JavaScript -->
                            <p class="text-gray-400 text-center text-lg">No items in order.</p>
                        </div>
                        <div class="space-y-4 text-lg mt-8 pt-4 border-t border-gray-700">
                            <div class="flex justify-between items-center">
                                <span class="text-gray-300">Subtotal:</span>
                                <span class="font-medium text-white">₹<span id="transaction-subtotal">0</span></span>
                            </div>
                            <div class="flex justify-between items-center">
                                <span class="text-gray-300">Shipping:</span>
                                <span class="font-medium text-white">₹<span id="transaction-shipping">0</span></span>
                            </div>
                            <div class="border-t border-gray-700 pt-4 mt-4 flex justify-between items-center text-xl font-bold">
                                <span class="text-blue-400">Total:</span>
                                <span class="text-white">₹<span id="transaction-total">0</span></span>
                            </div>
                        </div>
                    </div>

                    <!-- Address Section -->
                    <div class="lg:w-1/3 bg-gray-800 rounded-xl shadow-lg p-6 h-fit">
                        <div id="address-section">
                            <h3 class="text-2xl font-semibold mb-6 text-white border-b border-gray-700 pb-4">Shipping Address</h3>
                            <div class="space-y-4">
                                <div>
                                    <label for="full-name" class="block text-gray-300 text-sm font-bold mb-2">Full Name</label>
                                    <input type="text" id="full-name" class="shadow appearance-none border rounded-lg w-full py-3 px-4 text-gray-700 leading-tight focus:outline-none focus:shadow-outline bg-gray-700 border-gray-600 text-white placeholder-gray-400" placeholder="John Doe" required>
                                </div>
                                <div>
                                    <label for="email" class="block text-gray-300 text-sm font-bold mb-2">Email</label>
                                    <input type="email" id="email" class="shadow appearance-none border rounded-lg w-full py-3 px-4 text-gray-700 leading-tight focus:outline-none focus:shadow-outline bg-gray-700 border-gray-600 text-white placeholder-gray-400" placeholder="you@example.com" required>
                                </div>
                                <div>
                                    <label for="address-line1" class="block text-gray-300 text-sm font-bold mb-2">Address Line 1</label>
                                    <input type="text" id="address-line1" class="shadow appearance-none border rounded-lg w-full py-3 px-4 text-gray-700 leading-tight focus:outline-none focus:shadow-outline bg-gray-700 border-gray-600 text-white placeholder-gray-400" placeholder="123 Main St" required>
                                </div>
                                <div>
                                    <label for="address-line2" class="block text-gray-300 text-sm font-bold mb-2">Address Line 2 (Optional)</label>
                                    <input type="text" id="address-line2" class="shadow appearance-none border rounded-lg w-full py-3 px-4 text-gray-700 leading-tight focus:outline-none focus:shadow-outline bg-gray-700 border-gray-600 text-white placeholder-gray-400" placeholder="Apt 4B">
                                </div>
                                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                    <div>
                                        <label for="city" class="block text-gray-300 text-sm font-bold mb-2">City</label>
                                        <input type="text" id="city" class="shadow appearance-none border rounded-lg w-full py-3 px-4 text-gray-700 leading-tight focus:outline-none focus:shadow-outline bg-gray-700 border-gray-600 text-white placeholder-gray-400" placeholder="Anytown" required>
                                    </div>
                                    <div>
                                        <label for="state" class="block text-gray-300 text-sm font-bold mb-2">State</label>
                                        <input type="text" id="state" class="shadow appearance-none border rounded-lg w-full py-3 px-4 text-gray-700 leading-tight focus:outline-none focus:shadow-outline bg-gray-700 border-gray-600 text-white placeholder-gray-400" placeholder="State" required>
                                    </div>
                                </div>
                                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                    <div>
                                        <label for="pincode" class="block text-gray-300 text-sm font-bold mb-2">Pincode</label>
                                        <input type="text" id="pincode" class="shadow appearance-none border rounded-lg w-full py-3 px-4 text-gray-700 leading-tight focus:outline-none focus:shadow-outline bg-gray-700 border-gray-600 text-white placeholder-gray-400" placeholder="123456" required>
                                    </div>
                                    <div>
                                        <label for="phone-number" class="block text-gray-300 text-sm font-bold mb-2">Phone Number</label>
                                        <input type="tel" id="phone-number" class="shadow appearance-none border rounded-lg w-full py-3 px-4 text-gray-700 leading-tight focus:outline-none focus:shadow-outline bg-gray-700 border-gray-600 text-white placeholder-gray-400" placeholder="+91XXXXXXXXXX" required>
                                    </div>
                                </div>
                            </div>
                            <button id="continue-to-payment-btn" class="w-full bg-blue-600 text-white py-3 rounded-lg hover:bg-blue-700 transition-colors duration-300 shadow-md mt-8 text-lg font-semibold">Proceed to Payment</button>
                        </div>
                        <!-- The payment-section with UPI details is removed as Razorpay will handle the payment directly -->
                        <button id="back-to-cart-btn" class="w-full bg-gray-700 text-white py-3 rounded-lg hover:bg-gray-600 transition-colors duration-300 shadow-md mt-4 text-lg font-semibold">Back to Cart</button>
                    </div>
                </div>
            </div>
        </section>

        <!-- Order History Page Section -->
        <section id="order-history-page" class="page-section">
            <div class="container mx-auto px-4 py-12">
                <h2 class="text-4xl font-bold text-center mb-8 text-blue-400">Your <span class="text-white">Order History</span></h2>
                <div id="order-history-container" class="bg-gray-800 rounded-xl shadow-lg p-6">
                    <p id="no-orders-message" class="text-gray-400 text-center text-lg">You have no past orders.</p>
                    <!-- Orders will be dynamically loaded here -->
                </div>
            </div>
        </section>

        <!-- Admin Panel Page Section -->
        <section id="admin-panel-page" class="page-section">
            <div class="container mx-auto px-4 py-12">
                <h2 class="text-4xl font-bold text-center mb-8 text-blue-400">Admin <span class="text-white">Panel</span></h2>
                <div id="admin-login-section" class="max-w-md mx-auto bg-gray-800 rounded-xl shadow-lg p-6">
                    <h3 class="text-2xl font-semibold mb-4 text-white">Admin Login</h3>
                    <div class="mb-4">
                        <label for="admin-password" class="block text-gray-300 text-sm font-bold mb-2">Password</label>
                        <input type="password" id="admin-password" class="shadow appearance-none border rounded-lg w-full py-3 px-4 text-gray-700 leading-tight focus:outline-none focus:shadow-outline bg-gray-700 border-gray-600 text-white placeholder-gray-400" placeholder="Enter admin password">
                    </div>
                    <button id="admin-login-btn" class="w-full bg-blue-600 text-white py-3 rounded-lg hover:bg-blue-700 transition-colors duration-300 shadow-md text-lg font-semibold">Login to Admin Panel</button>
                </div>

                <div id="admin-content-section" class="hidden mt-8 bg-gray-800 rounded-xl shadow-lg p-6">
                    <h3 class="text-2xl font-semibold mb-6 text-white border-b border-gray-700 pb-4">All Orders</h3>
                    <div id="all-orders-container" class="space-y-6">
                        <p class="text-gray-400 text-center text-lg">No orders found.</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- FAQ Page Section -->
        <section id="faq-page" class="page-section">
            <div class="container mx-auto px-4 py-12">
                <h2 class="text-4xl font-bold text-center mb-4 text-blue-400">Frequently Asked <span class="text-white">Questions</span></h2>
                <p class="text-lg text-center text-gray-400 mb-12">
                    Find answers to common questions about Inkémon. Can't find what you're looking for? Contact our support team anytime!
                </p>

                <div class="max-w-3xl mx-auto space-y-6">
                    <!-- General Questions -->
                    <div class="bg-gray-800 rounded-xl shadow-lg overflow-hidden">
                        <div class="bg-blue-600 text-white text-xl font-semibold p-4 rounded-t-xl">General Questions</div>
                        <div class="accordion-item">
                            <div class="accordion-header text-white font-medium">
                                What is Inkémon?
                                <span class="arrow">
                                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-chevron-down">
                                        <path d="m6 9 6 6 6-6"/>
                                    </svg>
                                </span>
                            </div>
                            <div class="accordion-content text-gray-300">
                                <p>Inkémon is your premier destination for cutting-edge products, engineered with precision and designed for tomorrow. We offer a curated selection of innovative items to enhance your daily life.</p>
                            </div>
                        </div>
                        <div class="accordion-item">
                            <div class="accordion-header text-white font-medium">
                                Is Inkémon available internationally?
                                <span class="arrow">
                                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-chevron-down">
                                        <path d="m6 9 6 6 6-6"/>
                                    </svg>
                                </span>
                            </div>
                            <div class="accordion-content text-gray-300">
                                <p>No, we only ship in India.</p>
                            </div>
                        </div>
                    </div>

                    <!-- Orders & Shipping -->
                    <div class="bg-gray-800 rounded-xl shadow-lg overflow-hidden">
                        <div class="bg-blue-600 text-white text-xl font-semibold p-4 rounded-t-xl">Orders & Shipping</div>
                        <div class="accordion-item">
                            <div class="accordion-header text-white font-medium">
                                Can I track my order?
                                <span class="arrow">
                                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-chevron-down">
                                        <path d="m6 9 6 6 6-6"/>
                                    </svg>
                                </span>
                            </div>
                            <div class="accordion-content text-gray-300">
                                <p>Absolutely! Once your order is shipped, you will receive a tracking number via email. You can use this number to track the status of your delivery on our website or the carrier's site.</p>
                            </div>
                        </div>
                        <div class="accordion-item">
                            <div class="accordion-header text-white font-medium">
                                What if my item arrives damaged?
                                <span class="arrow">
                                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-chevron-down">
                                        <path d="m6 9 6 6 6-6"/>
                                    </svg>
                                </span>
                            </div>
                            <div class="accordion-content text-gray-300">
                                <p>In the rare event that your item arrives damaged, please contact our customer support team immediately with photos of the damage. We will arrange for a replacement or refund.</p>
                            </div>
                        </div>
                    </div>

                    <!-- Returns & Refunds -->
                    <div class="bg-gray-800 rounded-xl shadow-lg overflow-hidden">
                        <div class="bg-blue-600 text-white text-xl font-semibold p-4 rounded-t-xl">Returns & Refunds</div>
                        <div class="accordion-item">
                            <div class="accordion-header text-white font-medium">
                                What is your return policy?
                                <span class="arrow">
                                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-chevron-down">
                                        <path d="m6 9 6 6 6-6"/>
                                    </svg>
                                </span>
                            </div>
                            <div class="accordion-content text-gray-300">
                                <p>We offer a 5-day return policy for most products. Items must be in their original condition and packaging. Please visit our Returns page for full details and instructions.</p>
                            </div>
                        </div>
                        <div class="accordion-item">
                            <div class="accordion-header text-white font-medium">
                                How do I return an item?
                                <span class="arrow">
                                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-chevron-down">
                                        <path d="m6 9 6 6 6-6"/>
                                    </svg>
                                </span>
                            </div>
                            <div class="accordion-content text-gray-300">
                                <p>To initiate a return, call the number which is in support or mail with the mail you entered while checkout.</p>
                            </div>
                        </div>
                    </div>

                    <!-- Payment & Security -->
                    <div class="bg-gray-800 rounded-xl shadow-lg overflow-hidden">
                        <div class="bg-blue-600 text-white text-xl font-semibold p-4 rounded-t-xl">Payment & Security</div>
                        <div class="accordion-item">
                            <div class="accordion-header text-white font-medium">
                                What payment methods do you accept?
                                <span class="arrow">
                                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-chevron-down">
                                        <path d="m6 9 6 6 6-6"/>
                                    </svg>
                                </span>
                            </div>
                            <div class="accordion-content text-gray-300">
                                <p>We accept Cash on Delivery, UPI, Credit Card, and Debit Card. All transactions are encrypted for your security.</p>
                            </div>
                        </div>
                        <div class="accordion-item">
                            <div class="accordion-header text-white font-medium">
                                Is my payment information secure?
                                <span class="arrow">
                                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-chevron-down">
                                        <path d="M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z"/>
                                    </svg>
                                </span>
                            </div>
                            <div class="accordion-content text-gray-300">
                                <p>Yes, your payment information is highly secure. We use industry-standard SSL encryption and comply with PCI DSS standards to protect your data during all transactions.</p>
                            </div>
                        </div>
                    </div>

                    <!-- Products & Quality -->
                    <div class="bg-gray-800 rounded-xl shadow-lg overflow-hidden">
                        <div class="bg-blue-600 text-white text-xl font-semibold p-4 rounded-t-xl">Products & Quality</div>
                        <div class="accordion-item">
                            <div class="accordion-header text-white font-medium">
                                How do you ensure product quality?
                                <span class="arrow">
                                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucude-chevron-down">
                                        <path d="m6 9 6 6 6-6"/>
                                    </svg>
                                </span>
                            </div>
                            <div class="accordion-content text-gray-300">
                                <p>We maintain strict quality control standards. All products undergo rigorous testing and inspection to ensure they meet our high benchmarks for performance, durability, and craftsmanship.</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <!-- Footer -->
    <footer class="bg-black text-white py-12 mt-auto rounded-t-xl shadow-inner">
        <div class="container mx-auto px-4 grid grid-cols-1 md:grid-cols-2 gap-8 items-start">
            <div class="flex flex-col space-y-4">
                <div class="flex items-center space-x-3">
                    <div class="p-2 bg-blue-600 rounded-full overflow-hidden flex items-center justify-center">
                        <img src="https://starmiemine.github.io/inkemon/images/my_thing.png" alt="Inkémon Logo" class="w-12 h-12 object-cover rounded-full">
                    </div>
                    <span class="text-2xl font-bold text-blue-400">Inkémon</span>
                </div>
                <p class="text-gray-400 max-w-sm">
                    Your destination for cutting-edge products with precision engineering and tomorrow's design.
                </p>
            </div>
            <div class="flex flex-col items-start md:items-end space-y-4">
                <h3 class="text-xl font-semibold text-white mb-2">CONTACT</h3>
                <p class="text-gray-400">rudsat29@gmail.com</p>
                <p class="text-400">+91 9303270961</p>
            </div>
        </div>
        <div class="text-center text-gray-500 mt-8">
            &copy; 2025 Inkémon. All rights reserved.
        </div>
    </footer>

    <!-- Toast Notification -->
    <div id="toast-message" class="toast"></div>

    <!-- Pop-up Modal Structure -->
    <div id="welcome-modal" class="modal-overlay hidden">
        <div class="modal-content">
            <button id="close-modal-btn" class="modal-close-btn">
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-x">
                    <path d="M18 6 6 18"/><path d="m6 6 12 12"/>
                </svg>
            </button>
            <h3 class="modal-title">Welcome to Inkémon!</h3>
            <p class="modal-text">
                Please note: We currently only ship orders on <strong>Saturdays</strong>.
                Kindly place your orders accordingly to ensure timely processing.<br>
                Currently, only UPI (Paytm, PhonePe) is available.
            </p>
            <button id="acknowledge-modal-btn" class="modal-action-btn">
                Got It!
            </button>
        </div>
    </div>

    <!-- Login Modal -->
    <div id="login-modal" class="modal-overlay hidden">
        <div class="modal-content">
            <button id="close-login-modal-btn" class="modal-close-btn">
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-x">
                    <path d="M18 6 6 18"/><path d="m6 6 12 12"/>
                </svg>
            </button>
            <h3 class="modal-title text-blue-400">Login to Inkémon</h3>
            <p class="modal-text text-gray-300 mb-6">Sign in with your Google account to access more features.</p>
            
            <!-- Google Sign-In Button Container -->
            <div id="g_id_onload"
                 data-client_id="525630091315-vvjocicjsbutcffmjgubuq3hofbl9qvb.apps.googleusercontent.com"
                 data-login_uri="http://localhost:3000/api/auth/google"
                 data-auto_prompt="false"
                 data-callback="handleCredentialResponse">
            </div>

            <div class="g_id_signin"
                 data-type="standard"
                 data-size="large"
                 data-theme="outline"
                 data-text="signin_with"
                 data-shape="rectangular"
                 data-logo_alignment="left">
            </div>
        </div>
    </div>

    <script>
        // Global array to store cart items
        let cartItems = [];
        const SHIPPING_CHARGE = 123; // Fixed shipping charge
        const MAX_PRODUCT_QUANTITY = 3; // Maximum quantity for a single product in the cart

        // Global variable to hold the currently active category for product filtering
        let currentActiveCategory = 'all';
        let loggedInUser = null; // Stores the Firebase User object
        let firestoreDb; // Firestore instance
        let firebaseAuth; // Firebase Auth instance
        let currentAppId; // Global appId from environment

        // Function to update cart count in header
        const updateCartCount = () => {
            const cartCountSpan = document.getElementById('cart-count');
            if (cartCountSpan) {
                const totalItems = cartItems.reduce((sum, item) => sum + item.quantity, 0);
                cartCountSpan.textContent = totalItems;
            }
        };

        // Function to show a toast notification
        const showToast = (message) => {
            const toastMessage = document.getElementById('toast-message');
            if (toastMessage) {
                toastMessage.textContent = message;
                toastMessage.classList.add('show');
                setTimeout(() => {
                    toastMessage.classList.remove('show');
                }, 10000); // Hide after 10 seconds
            }
        };

        // Function to save the current cart to Firestore for the logged-in user
        const saveCartToFirestore = async () => {
            if (loggedInUser && firestoreDb) {
                const userId = loggedInUser.uid;
                const cartRef = window.firebaseFirestore.doc(firestoreDb, `artifacts/${currentAppId}/users/${userId}/carts/userCart`);
                try {
                    await window.firebaseFirestore.setDoc(cartRef, { items: JSON.stringify(cartItems) }, { merge: true });
                    console.log(`Cart saved for ${userId}`);
                } catch (e) {
                    console.error("Error saving cart to Firestore:", e);
                    showToast("Failed to save cart to cloud.");
                }
            }
        };

        // Function to load the cart from Firestore for the logged-in user
        const loadCartForUser = async (user) => {
            if (user && firestoreDb) {
                const userId = user.uid;
                const cartRef = window.firebaseFirestore.doc(firestoreDb, `artifacts/${currentAppId}/users/${userId}/carts/userCart`);
                try {
                    const docSnap = await window.firebaseFirestore.getDoc(cartRef);
                    if (docSnap.exists()) {
                        const data = docSnap.data();
                        if (data.items) {
                            cartItems = JSON.parse(data.items);
                            console.log(`Cart loaded for ${userId}:`, cartItems);
                        } else {
                            cartItems = [];
                        }
                    } else {
                        cartItems = []; // No stored cart for this user
                        console.log(`No stored cart found for ${userId}.`);
                    }
                } catch (e) {
                    console.error("Error loading cart from Firestore:", e);
                    showToast("Failed to load cart from cloud.");
                    cartItems = [];
                }
            } else {
                cartItems = []; // No user logged in, clear cart
                console.log("No user logged in, cart cleared.");
            }
            updateCartCount();
            renderCartItems();
        };

        // Function to add item to cart
        const addItemToCart = async (name, price) => {
            const trimmedName = name.trim(); // Trim name for consistency
            const existingItem = cartItems.find(item => item.name === trimmedName);
            if (existingItem) {
                if (existingItem.quantity < MAX_PRODUCT_QUANTITY) {
                    existingItem.quantity++;
                    showToast(`${trimmedName} quantity increased to ${existingItem.quantity}!`);
                } else {
                    showToast(`Maximum quantity (${MAX_PRODUCT_QUANTITY}) reached for ${trimmedName}.`);
                }
            } else {
                cartItems.push({ name: trimmedName, price, quantity: 1 });
                showToast(`${trimmedName} added to cart!`);
            }
            updateCartCount();
            renderCartItems(); // Call renderCartItems to update cart display immediately
            await saveCartToFirestore(); // Save cart after modification
        };

        // Function to render cart items on the cart page
        const renderCartItems = () => {
            const cartItemsContainer = document.getElementById('cart-items-container');
            const emptyCartMessage = document.getElementById('empty-cart-message');
            const proceedToCheckoutBtn = document.getElementById('proceed-to-checkout-btn');
            const loginRequiredMessage = document.getElementById('login-required-message');

            if (!cartItemsContainer || !emptyCartMessage || !proceedToCheckoutBtn || !loginRequiredMessage) {
                console.warn("Cart elements not found. Cannot render cart items.");
                return;
            }

            cartItemsContainer.innerHTML = ''; // Clear existing items

            if (cartItems.length === 0) {
                emptyCartMessage.style.display = 'block';
            } else {
                emptyCartMessage.style.display = 'none';
                cartItems.forEach((item) => {
                    const itemElement = document.createElement('div');
                    itemElement.classList.add('flex', 'items-center', 'justify-between', 'bg-gray-700', 'p-4', 'rounded-lg', 'shadow-md');
                    itemElement.innerHTML = `
                        <div class="flex items-center space-x-4">
                            <div class="w-16 h-16 bg-gray-600 rounded-md flex items-center justify-center">
                                <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-image text-gray-400">
                                    <rect width="18" height="18" x="3" y="3" rx="2" ry="2"/><circle cx="9" cy="9" r="2"/><path d="m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21"/>
                                </svg>
                            </div>
                            <div>
                                <p class="text-lg font-semibold text-white">${item.name}</p>
                                <p class="text-gray-300">₹${item.price.toLocaleString('en-IN')}</p>
                            </div>
                        </div>
                        <div class="flex items-center space-x-4">
                            <button class="quantity-btn bg-gray-600 text-white px-3 py-1 rounded-md hover:bg-gray-500 transition-colors duration-200" data-name="${item.name}" data-action="decrease">-</button>
                            <span class="text-white font-medium quantity-display">${item.quantity}</span>
                            <button class="quantity-btn bg-gray-600 text-white px-3 py-1 rounded-md hover:bg-gray-500 transition-colors duration-200" data-name="${item.name}" data-action="increase">+</button>
                            <button class="remove-item-btn text-red-500 hover:text-red-600 transition-colors duration-200" data-name="${item.name}">
                                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-trash-2">
                                    <path d="M3 6h18"/><path d="M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6"/><path d="M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2"/>
                                    <line x1="10" x2="10" y1="11" y2="17"/><line x1="14" x2="14" y1="11" y2="17"/>
                                </svg>
                            </button>
                        </div>
                    `;
                    cartItemsContainer.appendChild(itemElement);
                });
            }
            calculateCartTotals();
            // Enable/Disable checkout button based on login status
            if (loggedInUser) {
                proceedToCheckoutBtn.disabled = false;
                loginRequiredMessage.style.display = 'none';
            } else {
                proceedToCheckoutBtn.disabled = true;
                loginRequiredMessage.style.display = 'block';
            }
        };

        // Function to calculate and update cart totals
        const calculateCartTotals = () => {
            const cartSubtotalSpan = document.getElementById('cart-subtotal');
            const cartShippingSpan = document.getElementById('cart-shipping');
            const cartTotalSpan = document.getElementById('cart-total');

            if (!cartSubtotalSpan || !cartShippingSpan || !cartTotalSpan) {
                console.warn("Cart total elements not found. Cannot calculate cart totals.");
                return;
            }

            let subtotal = cartItems.reduce((sum, item) => sum + (item.price * item.quantity), 0);
            let shipping = SHIPPING_CHARGE;
            let total = subtotal + shipping;

            cartSubtotalSpan.textContent = subtotal.toLocaleString('en-IN');
            cartShippingSpan.textContent = shipping.toLocaleString('en-IN');
            cartTotalSpan.textContent = total.toLocaleString('en-IN');
        };

        // Function to render transaction summary on the transaction page
        const renderTransactionSummary = () => {
            const transactionItemsContainer = document.getElementById('transaction-items-container');
            const transactionSubtotalSpan = document.getElementById('transaction-subtotal');
            const transactionShippingSpan = document.getElementById('transaction-shipping');
            const transactionTotalSpan = document.getElementById('transaction-total');

            if (!transactionItemsContainer || !transactionSubtotalSpan || !transactionShippingSpan || !transactionTotalSpan) {
                console.warn("Transaction summary elements not found. Cannot render transaction summary.");
                return;
            }

            transactionItemsContainer.innerHTML = ''; // Clear existing items
            if (cartItems.length === 0) {
                transactionItemsContainer.innerHTML = '<p class="text-gray-400 text-center text-lg">No items in order.</p>';
            } else {
                cartItems.forEach(item => {
                    const itemElement = document.createElement('div');
                    itemElement.classList.add('flex', 'justify-between', 'items-center', 'text-gray-300');
                    itemElement.innerHTML = `
                        <span>${item.name} (x${item.quantity})</span>
                        <span>₹${(item.price * item.quantity).toLocaleString('en-IN')}</span>
                    `;
                    transactionItemsContainer.appendChild(itemElement);
                });
            }
            // Update totals on transaction page
            let subtotal = cartItems.reduce((sum, item) => sum + (item.price * item.quantity), 0);
            let shipping = SHIPPING_CHARGE;
            let total = subtotal + shipping;

            transactionSubtotalSpan.textContent = subtotal.toLocaleString('en-IN');
            transactionShippingSpan.textContent = shipping.toLocaleString('en-IN');
            transactionTotalSpan.textContent = total.toLocaleString('en-IN');
        };

        // Function to filter products based on search query and active category
        const filterProducts = () => {
            const productSearchInput = document.getElementById('product-search-input');
            const filterButtons = document.querySelectorAll('.filter-button');

            const searchQuery = productSearchInput.value.toLowerCase();
            
            // Determine the active category based on currentActiveCategory global variable
            let effectiveCategory = currentActiveCategory;
            
            // Update active state for filter buttons on the products page
            filterButtons.forEach(btn => {
                if (btn.dataset.category === effectiveCategory) {
                    btn.classList.add('bg-blue-600', 'text-white');
                    btn.classList.remove('bg-gray-800', 'text-gray-300');
                } else {
                    btn.classList.remove('bg-blue-600', 'text-white');
                    btn.classList.add('bg-gray-800', 'text-gray-300');
                }
            });

            const productListContainer = document.getElementById('product-list');
            if (!productListContainer) {
                console.warn("Product list container not found. Cannot filter products.");
                return;
            }
            const cardsToFilter = productListContainer.querySelectorAll('.product-card');

            cardsToFilter.forEach(card => {
                const productNameElement = card.querySelector('h3');
                const productDescriptionElement = card.querySelector('p:nth-of-type(1)');

                const productName = productNameElement ? productNameElement.textContent.toLowerCase() : '';
                const productDescription = productDescriptionElement ? productDescriptionElement.textContent.toLowerCase() : '';
                
                const cardCategories = card.dataset.category ? card.dataset.category.split(' ') : [];

                const matchesSearch = productName.includes(searchQuery) || productDescription.includes(searchQuery);
                const matchesCategory = effectiveCategory === 'all' || cardCategories.includes(effectiveCategory);

                if (matchesSearch && matchesCategory) {
                    card.style.display = 'block';
                } else {
                    card.style.display = 'none';
                }
            });
        };

        // Function to show a specific page and update active link styling
        const showPage = async (pageId, category = 'all') => {
            const pageSections = document.querySelectorAll('.page-section');
            const productSearchInput = document.getElementById('product-search-input');
            const navLinks = document.querySelectorAll('.nav-link');
            const mobileMenu = document.getElementById('mobile-menu');

            // Hide all page sections first
            pageSections.forEach(section => {
                section.classList.remove('active');
                section.style.display = 'none'; // Ensure display is set to none
            });

            // Show the target page
            const targetPage = document.getElementById(pageId);
            if (targetPage) {
                targetPage.classList.add('active');
                targetPage.style.display = 'block'; // Ensure display is set to block
            } else {
                console.warn(`Page with ID ${pageId} not found.`);
            }

            // Handle category setting for products page
            if (pageId === 'products-page') {
                currentActiveCategory = category; // Set the global active category
                if (productSearchInput) productSearchInput.value = ''; // Clear search on category change
                filterProducts(); // Apply filters immediately
            } else {
                // If navigating away from products page, reset search and category filters
                if (productSearchInput) productSearchInput.value = '';
                currentActiveCategory = 'all'; // Reset global category
                // Ensure all product cards are visible when leaving product pages
                document.querySelectorAll('.product-card').forEach(card => {
                    card.style.display = 'block';
                });
            }

            // If navigating to cart page, render cart items
            if (pageId === 'cart-page') {
                renderCartItems();
            } else if (pageId === 'transaction-menu-page') {
                renderTransactionSummary();
            } else if (pageId === 'order-history-page') {
                if (loggedInUser) {
                    renderOrderHistory(loggedInUser.uid);
                } else {
                    document.getElementById('order-history-container').innerHTML = '<p class="text-red-400 text-center text-lg">Please log in to view your order history.</p>';
                }
            } else if (pageId === 'admin-panel-page') {
                // Reset admin panel view
                document.getElementById('admin-login-section').classList.remove('hidden');
                document.getElementById('admin-content-section').classList.add('hidden');
                document.getElementById('admin-password').value = '';
                document.getElementById('all-orders-container').innerHTML = '<p class="text-gray-400 text-center text-lg">No orders found.</p>';
            }

            // Update active navigation link styling
            navLinks.forEach(link => {
                if (link.dataset.page + '-page' === pageId) {
                    link.classList.add('bg-blue-600', 'text-white');
                    link.classList.remove('bg-gray-800', 'text-gray-300');
                } else {
                    link.classList.remove('bg-blue-600', 'text-white');
                    link.classList.add('bg-gray-800', 'text-gray-300');
                }
            });
        };

        // Function to send email
        function sendEmail(orderDetails) {
            const itemsList = orderDetails.cartItems.map(item =>
                `${item.name} (Qty: ${item.quantity}) - ₹${item.price.toLocaleString('en-IN')}`
            ).join('\n');

            const templateParams = {
                to_name: "Inkémon Admin",
                from_name: orderDetails.fullName,
                customer_email: orderDetails.email,
                customer_phone: orderDetails.phoneNumber,
                shipping_address: `${orderDetails.addressLine1}, ${orderDetails.addressLine2 ? orderDetails.addressLine2 + ', ' : ''}${orderDetails.city}, ${orderDetails.state} - ${orderDetails.pincode}`,
                order_details: itemsList,
                subtotal: `₹${orderDetails.subtotal.toLocaleString('en-IN')}`,
                shipping_cost: `₹${orderDetails.shippingCost.toLocaleString('en-IN')}`,
                total_amount: `₹${orderDetails.totalAmount.toLocaleString('en-IN')}`,
                order_date: orderDetails.orderDate,
                payment_status: orderDetails.paymentStatus, // Include payment status
                razorpay_payment_id: orderDetails.razorpayPaymentId || 'N/A' // Include Razorpay ID
            };

            emailjs.send("service_3nyswo9", "template_pwyhzdr", templateParams)
                .then(() => {
                    showToast('Order details sent to your email!');
                })
                .catch((err) => {
                    console.error("Email failed", err);
                    showToast('Failed to send order confirmation email. Please contact support.');
                });
        }

        // Function to save order details to Firestore
        async function saveOrderToFirestore(orderDetails) {
            if (!loggedInUser || !firestoreDb) {
                console.error("User not logged in or Firestore not initialized. Cannot save order.");
                showToast("Login required to save order history.");
                return;
            }

            const userId = loggedInUser.uid;
            const userOrdersCollectionRef = window.firebaseFirestore.collection(firestoreDb, `artifacts/${currentAppId}/users/${userId}/orders`);
            const publicOrdersCollectionRef = window.firebaseFirestore.collection(firestoreDb, `artifacts/${currentAppId}/public/data/all_orders`);

            try {
                // Save to user's private orders
                await window.firebaseFirestore.addDoc(userOrdersCollectionRef, orderDetails);
                console.log(`Order saved to user's history for ${userId}`);

                // Save to public orders for admin panel (ensure sensitive data is handled appropriately if this were a real app)
                await window.firebaseFirestore.addDoc(publicOrdersCollectionRef, {
                    userId: userId,
                    userName: loggedInUser.displayName || loggedInUser.email,
                    userEmail: loggedInUser.email,
                    ...orderDetails // Spread all order details
                });
                console.log("Order saved to public orders for admin panel.");
                showToast("Order placed and saved to your history!");
            } catch (error) {
                console.error("Error saving order to Firestore:", error);
                showToast("Order placed, but failed to save to history. Please contact support.");
            }
        }

        // Google Sign-In Callback Function
        window.handleCredentialResponse = async (response) => {
            const loginModal = document.getElementById('login-modal');
            const authStatusDiv = document.getElementById('auth-status');
            const authButton = document.getElementById('auth-button');
            const proceedToCheckoutBtn = document.getElementById('proceed-to-checkout-btn');
            const loginRequiredMessage = document.getElementById('login-required-message');
            const orderHistoryNav = document.getElementById('order-history-nav');
            const mobileOrderHistoryNav = document.getElementById('mobile-order-history-nav');

            try {
                // Use the GoogleAuthProvider to create a credential from the ID token
                const credential = window.GoogleAuthProvider.credential(response.credential);
                // Sign in with the credential
                const result = await window.signInWithPopup(firebaseAuth, window.GoogleAuthProvider.credential(response.credential));
                loggedInUser = result.user;

                authStatusDiv.textContent = `Welcome, ${loggedInUser.displayName || loggedInUser.email}! User ID: ${loggedInUser.uid}`;
                authButton.textContent = 'Logout';
                authButton.onclick = logout;
                loginModal.classList.add('hidden');
                orderHistoryNav.classList.remove('hidden');
                mobileOrderHistoryNav.classList.remove('hidden');

                showToast(`Login successful! Welcome, ${loggedInUser.displayName || loggedInUser.email}!`);
                await loadCartForUser(loggedInUser); // Load cart after successful login

                // Update checkout button status based on cart and login
                if (cartItems.length > 0) {
                    proceedToCheckoutBtn.disabled = false;
                    loginRequiredMessage.style.display = 'none';
                } else {
                    proceedToCheckoutBtn.disabled = true;
                    loginRequiredMessage.style.display = 'block';
                }

            } catch (error) {
                console.error('Google Sign-In Error:', error);
                showToast('Google login failed. Please try again.');
                loggedInUser = null;
                authStatusDiv.textContent = 'Not logged in';
                authButton.textContent = 'Login';
                authButton.onclick = () => loginModal.classList.remove('hidden');
                proceedToCheckoutBtn.disabled = true;
                loginRequiredMessage.style.display = 'block';
                orderHistoryNav.classList.add('hidden');
                mobileOrderHistoryNav.classList.add('hidden');
            }
        };

        // Function to handle logout
        const logout = async () => {
            const authStatusDiv = document.getElementById('auth-status');
            const authButton = document.getElementById('auth-button');
            const proceedToCheckoutBtn = document.getElementById('proceed-to-checkout-btn');
            const loginRequiredMessage = document.getElementById('login-required-message');
            const orderHistoryNav = document.getElementById('order-history-nav');
            const mobileOrderHistoryNav = document.getElementById('mobile-order-history-nav');

            try {
                await window.signOut(firebaseAuth);
                loggedInUser = null;
                cartItems = []; // Clear the current cart items in memory

                // Revoke Google session (prevents auto-login on next visit if user logs out)
                if (google.accounts.id) {
                    google.accounts.id.disableAutoSelect();
                }
                
                // Reset UI
                authStatusDiv.textContent = 'Not logged in';
                authButton.textContent = 'Login';
                authButton.onclick = () => document.getElementById('login-modal').classList.remove('hidden'); // Re-assign click handler
                orderHistoryNav.classList.add('hidden');
                mobileOrderHistoryNav.classList.add('hidden');

                renderCartItems(); // Re-render cart to show empty state
                updateCartCount(); // Update cart count to 0

                proceedToCheckoutBtn.disabled = true; // Disable checkout button
                loginRequiredMessage.style.display = 'block'; // Show login message

                showToast('Logged out successfully!');
            } catch (error) {
                console.error("Error during logout:", error);
                showToast("Failed to log out. Please try again.");
            }
        };

        // Function to render order history for the logged-in user
        const renderOrderHistory = async (userId) => {
            const orderHistoryContainer = document.getElementById('order-history-container');
            const noOrdersMessage = document.getElementById('no-orders-message');

            if (!orderHistoryContainer || !noOrdersMessage) {
                console.warn("Order history elements not found.");
                return;
            }

            orderHistoryContainer.innerHTML = ''; // Clear existing content
            orderHistoryContainer.appendChild(noOrdersMessage); // Re-add message initially

            if (!userId || !firestoreDb) {
                noOrdersMessage.textContent = "Please log in to view your order history.";
                noOrdersMessage.style.display = 'block';
                return;
            }

            try {
                const ordersCollectionRef = window.firebaseFirestore.collection(firestoreDb, `artifacts/${currentAppId}/users/${userId}/orders`);
                const q = window.firebaseFirestore.query(ordersCollectionRef); // No orderBy to avoid index issues

                const querySnapshot = await window.firebaseFirestore.getDocs(q);
                const orders = [];
                querySnapshot.forEach((doc) => {
                    orders.push({ id: doc.id, ...doc.data() });
                });

                if (orders.length === 0) {
                    noOrdersMessage.textContent = "You have no past orders.";
                    noOrdersMessage.style.display = 'block';
                } else {
                    noOrdersMessage.style.display = 'none';
                    // Sort orders by date in descending order (most recent first)
                    orders.sort((a, b) => new Date(b.orderDate).getTime() - new Date(a.orderDate).getTime());

                    orders.forEach(order => {
                        const orderElement = document.createElement('div');
                        orderElement.classList.add('bg-gray-700', 'rounded-lg', 'shadow-md', 'p-4', 'mb-4');
                        orderElement.innerHTML = `
                            <h4 class="text-xl font-semibold text-blue-300 mb-2">Order ID: ${order.id}</h4>
                            <p class="text-gray-300 mb-1">Date: ${order.orderDate}</p>
                            <p class="text-gray-300 mb-1">Total: ₹${order.totalAmount.toLocaleString('en-IN')}</p>
                            <p class="text-gray-300 mb-2">Status: <span class="${order.paymentStatus === 'Paid' ? 'text-green-400' : 'text-yellow-400'}">${order.paymentStatus}</span></p>
                            <div class="mt-2 border-t border-gray-600 pt-2">
                                <p class="text-gray-200 font-medium">Items:</p>
                                <ul class="list-disc list-inside text-gray-400">
                                    ${order.cartItems.map(item => `<li>${item.name} (x${item.quantity}) - ₹${item.price.toLocaleString('en-IN')}</li>`).join('')}
                                </ul>
                            </div>
                            <div class="mt-2 border-t border-gray-600 pt-2">
                                <p class="text-gray-200 font-medium">Shipping Address:</p>
                                <p class="text-gray-400">${order.fullName}</p>
                                <p class="text-gray-400">${order.addressLine1}${order.addressLine2 ? ', ' + order.addressLine2 : ''}</p>
                                <p class="text-gray-400">${order.city}, ${order.state} - ${order.pincode}</p>
                                <p class="text-gray-400">Phone: ${order.phoneNumber}</p>
                            </div>
                        `;
                        orderHistoryContainer.appendChild(orderElement);
                    });
                }
            } catch (error) {
                console.error("Error fetching order history:", error);
                noOrdersMessage.textContent = "Failed to load order history. Please try again.";
                noOrdersMessage.style.display = 'block';
            }
        };

        // Function to render all orders for the admin panel
        const renderAdminOrders = async () => {
            const allOrdersContainer = document.getElementById('all-orders-container');
            if (!allOrdersContainer) {
                console.warn("Admin orders container not found.");
                return;
            }

            allOrdersContainer.innerHTML = '<p class="text-gray-400 text-center text-lg">Loading orders...</p>';

            try {
                const publicOrdersCollectionRef = window.firebaseFirestore.collection(firestoreDb, `artifacts/${currentAppId}/public/data/all_orders`);
                const q = window.firebaseFirestore.query(publicOrdersCollectionRef); // No orderBy to avoid index issues

                const querySnapshot = await window.firebaseFirestore.getDocs(q);
                const orders = [];
                querySnapshot.forEach((doc) => {
                    orders.push({ id: doc.id, ...doc.data() });
                });

                if (orders.length === 0) {
                    allOrdersContainer.innerHTML = '<p class="text-gray-400 text-center text-lg">No orders found.</p>';
                } else {
                    allOrdersContainer.innerHTML = ''; // Clear loading message
                    // Sort orders by date in descending order (most recent first)
                    orders.sort((a, b) => new Date(b.orderDate).getTime() - new Date(a.orderDate).getTime());

                    orders.forEach(order => {
                        const orderElement = document.createElement('div');
                        orderElement.classList.add('bg-gray-700', 'rounded-lg', 'shadow-md', 'p-4', 'mb-4');
                        orderElement.innerHTML = `
                            <h4 class="text-xl font-semibold text-blue-300 mb-2">Order ID: ${order.id}</h4>
                            <p class="text-gray-300 mb-1">User ID: <span class="text-white">${order.userId}</span></p>
                            <p class="text-gray-300 mb-1">Customer Name: <span class="text-white">${order.fullName}</span></p>
                            <p class="text-gray-300 mb-1">Google Email: <span class="text-white">${order.userEmail || 'N/A'}</span></p>
                            <p class="text-gray-300 mb-1">Order Date: ${order.orderDate}</p>
                            <p class="text-gray-300 mb-1">Total Amount: ₹${order.totalAmount.toLocaleString('en-IN')}</p>
                            <p class="text-gray-300 mb-2">Payment Status: <span class="${order.paymentStatus === 'Paid' ? 'text-green-400' : 'text-yellow-400'}">${order.paymentStatus}</span></p>
                            <div class="mt-2 border-t border-gray-600 pt-2">
                                <p class="text-gray-200 font-medium">Items:</p>
                                <ul class="list-disc list-inside text-gray-400">
                                    ${order.cartItems.map(item => `<li>${item.name} (x${item.quantity}) - ₹${item.price.toLocaleString('en-IN')}</li>`).join('')}
                                </ul>
                            </div>
                            <div class="mt-2 border-t border-gray-600 pt-2">
                                <p class="text-gray-200 font-medium">Shipping Address:</p>
                                <p class="text-gray-400">${order.addressLine1}${order.addressLine2 ? ', ' + order.addressLine2 : ''}</p>
                                <p class="text-gray-400">${order.city}, ${order.state} - ${order.pincode}</p>
                                <p class="text-gray-400">Phone: ${order.phoneNumber}</p>
                            </div>
                        `;
                        allOrdersContainer.appendChild(orderElement);
                    });
                }
            } catch (error) {
                console.error("Error fetching all orders for admin panel:", error);
                allOrdersContainer.innerHTML = '<p class="text-red-400 text-center text-lg">Failed to load orders for admin panel. Please check console for errors.</p>';
            }
        };

        // --- DOMContentLoaded listener and event attachments ---
        document.addEventListener('DOMContentLoaded', async () => {
            const navLinks = document.querySelectorAll('.nav-link');
            const mobileMenuButton = document.getElementById('mobile-menu-button');
            const mobileMenu = document.getElementById('mobile-menu');
            const accordionHeaders = document.querySelectorAll('.accordion-header');
            const filterButtons = document.querySelectorAll('.filter-button');
            const productSearchInput = document.getElementById('product-search-input');
            const cartItemsContainer = document.getElementById('cart-items-container');

            // Transaction page elements
            const proceedToCheckoutBtn = document.getElementById('proceed-to-checkout-btn');
            const continueToPaymentBtn = document.getElementById('continue-to-payment-btn');
            const backToCartBtn = document.getElementById('back-to-cart-btn');
            const loginRequiredMessage = document.getElementById('login-required-message');
            
            // Address input fields
            const fullNameInput = document.getElementById('full-name');
            const emailInput = document.getElementById('email');
            const addressLine1Input = document.getElementById('address-line1');
            const addressLine2Input = document.getElementById('address-line2');
            const cityInput = document.getElementById('city');
            const stateInput = document.getElementById('state');
            const pincodeInput = document.getElementById('pincode');
            const phoneNumberInput = document.getElementById('phone-number');

            // Pop-up modal elements
            const welcomeModal = document.getElementById('welcome-modal');
            const closeModalBtn = document.getElementById('close-modal-btn');
            const acknowledgeModalBtn = document.getElementById('acknowledge-modal-btn');

            // Login modal elements
            const loginModal = document.getElementById('login-modal');
            const closeLoginModalBtn = document.getElementById('close-login-modal-btn');
            const authButton = document.getElementById('auth-button');
            const authStatusDiv = document.getElementById('auth-status');
            const orderHistoryNav = document.getElementById('order-history-nav');
            const mobileOrderHistoryNav = document.getElementById('mobile-order-history-nav');

            // Admin panel elements
            const adminLoginSection = document.getElementById('admin-login-section');
            const adminContentSection = document.getElementById('admin-content-section');
            const adminPasswordInput = document.getElementById('admin-password');
            const adminLoginBtn = document.getElementById('admin-login-btn');

            // Initialize Firebase instances from global window object
            firestoreDb = window.firebaseDb;
            firebaseAuth = window.firebaseAuth;
            currentAppId = window.appId;

            // Handle Firebase Auth state changes
            window.onAuthStateChanged(firebaseAuth, async (user) => {
                loggedInUser = user;
                if (user) {
                    authStatusDiv.textContent = `Welcome, ${user.displayName || user.email}! User ID: ${user.uid}`;
                    authButton.textContent = 'Logout';
                    authButton.onclick = logout;
                    proceedToCheckoutBtn.disabled = false; // Enable checkout button
                    loginRequiredMessage.style.display = 'none'; // Hide login message
                    orderHistoryNav.classList.remove('hidden');
                    mobileOrderHistoryNav.classList.remove('hidden');
                    await loadCartForUser(user); // Load cart for the logged-in user
                } else {
                    authStatusDiv.textContent = 'Not logged in';
                    authButton.textContent = 'Login';
                    authButton.onclick = () => loginModal.classList.remove('hidden');
                    proceedToCheckoutBtn.disabled = true; // Disable checkout button
                    loginRequiredMessage.style.display = 'block'; // Show login message
                    orderHistoryNav.classList.add('hidden');
                    mobileOrderHistoryNav.classList.add('hidden');
                    cartItems = []; // Clear cart if logged out
                    renderCartItems(); // Update cart display
                    updateCartCount(); // Update cart count to 0
                }
            });

            // Initial Firebase setup: No automatic sign-in, user must explicitly log in via Google.
            // This section was removed to ensure only Google login is available.

            // Show welcome modal if not dismissed before
            if (localStorage.getItem('welcomeModalDismissed') !== 'true') {
                welcomeModal.classList.remove('hidden');
            }

            // Close welcome modal event listeners
            closeModalBtn.addEventListener('click', () => {
                welcomeModal.classList.add('hidden');
                localStorage.setItem('welcomeModalDismissed', 'true');
            });

            acknowledgeModalBtn.addEventListener('click', () => {
                welcomeModal.classList.add('hidden');
                localStorage.setItem('welcomeModalDismissed', 'true');
            });

            // Login modal close button
            closeLoginModalBtn.addEventListener('click', () => {
                loginModal.classList.add('hidden');
            });

            // Event listeners for navigation links
            navLinks.forEach(link => {
                link.addEventListener('click', (e) => {
                    e.preventDefault(); // Prevent default link behavior
                    const page = link.dataset.page;
                    if (page === 'products') {
                        currentActiveCategory = 'all';
                    }
                    showPage(`${page}-page`);
                    // Close mobile menu if open
                    if (!mobileMenu.classList.contains('hidden')) {
                        mobileMenu.classList.add('hidden');
                    }
                });
            });

            // Mobile menu toggle
            mobileMenuButton.addEventListener('click', () => {
                mobileMenu.classList.toggle('hidden');
            });

            // Accordion functionality for FAQ
            accordionHeaders.forEach(header => {
                header.addEventListener('click', () => {
                    const content = header.nextElementSibling;
                    header.classList.toggle('active');
                    content.classList.toggle('open');
                    if (content.classList.contains('open')) {
                        content.style.maxHeight = content.scrollHeight + "px";
                    } else {
                        content.style.maxHeight = "0";
                    }
                });
            });

            // Product filtering functionality (buttons on products page)
            filterButtons.forEach(button => {
                button.addEventListener('click', () => {
                    currentActiveCategory = button.dataset.category; // Update global active category
                    filterProducts(); // Re-filter products based on new category and current search
                });
            });

            // Search input event listener
            if (productSearchInput) {
                productSearchInput.addEventListener('input', filterProducts);
            }

            // Add to Cart button event listeners
            document.querySelectorAll('.add-to-cart').forEach(button => {
                button.addEventListener('click', async (e) => {
                    const productName = e.target.dataset.name;
                    const productPrice = parseFloat(e.target.dataset.price);
                    await addItemToCart(productName, productPrice);
                });
            });

            // Event delegation for quantity and remove buttons in cart
            if (cartItemsContainer) {
                cartItemsContainer.addEventListener('click', async (e) => {
                    // Check if the clicked element or its parent is a quantity button
                    const quantityBtn = e.target.closest('.quantity-btn');
                    if (quantityBtn) {
                        const itemName = quantityBtn.dataset.name.trim(); // Trim name for consistency
                        const action = quantityBtn.dataset.action;
                        let itemToUpdate = cartItems.find(item => item.name === itemName);

                        if (itemToUpdate) {
                            if (action === 'increase') {
                                if (itemToUpdate.quantity < MAX_PRODUCT_QUANTITY) { // Enforce max limit
                                    itemToUpdate.quantity++;
                                    showToast(`${itemName} quantity increased to ${itemToUpdate.quantity}!`);
                                } else {
                                    showToast(`Maximum quantity (${MAX_PRODUCT_QUANTITY}) reached for ${itemName}.`);
                                }
                            } else if (action === 'decrease') {
                                if (itemToUpdate.quantity > 1) {
                                    itemToUpdate.quantity--;
                                    showToast(`${itemName} quantity decreased to ${itemToUpdate.quantity}.`);
                                } else {
                                    const indexToRemove = cartItems.findIndex(item => item.name === itemName);
                                    if (indexToRemove !== -1) {
                                        cartItems.splice(indexToRemove, 1);
                                        showToast(`${itemName} removed from cart.`);
                                    }
                                }
                            }
                            // Always re-render the cart after any quantity change or removal to ensure UI consistency
                            renderCartItems(); // This call should update the numbers
                            updateCartCount();
                            calculateCartTotals();
                            await saveCartToFirestore(); // Save cart after modification
                        } else {
                            console.warn(`Attempted to update quantity for non-existent item: ${itemName}. Re-rendering cart.`);
                            renderCartItems(); // Fallback to full re-render if item not found (e.g., after removal)
                            updateCartCount();
                        }
                    } else if (e.target.closest('.remove-item-btn')) {
                        const itemName = e.target.closest('.remove-item-btn').dataset.name.trim(); // Trim name for consistency
                        const indexToRemove = cartItems.findIndex(item => item.name === itemName);
                        if (indexToRemove !== -1) {
                            cartItems.splice(indexToRemove, 1); // Remove item from array
                            showToast(`${itemName} removed from cart.`);
                        }
                        renderCartItems(); // Re-render cart after removal
                        updateCartCount();
                        await saveCartToFirestore(); // Save cart after modification
                    }
                });
            }


            // Event listener for Proceed to Checkout button
            if (proceedToCheckoutBtn) {
                proceedToCheckoutBtn.addEventListener('click', () => {
                    if (!loggedInUser) {
                        showToast("Please log in with Google to proceed to checkout.");
                        loginModal.classList.remove('hidden'); // Show login modal
                        return;
                    }
                    if (cartItems.length === 0) {
                        showToast("Your cart is empty. Please add items before proceeding to checkout.");
                        return; // Prevent navigating if cart is empty
                    }
                    // Prefill email and full name if logged in
                    if (loggedInUser) {
                        fullNameInput.value = loggedInUser.displayName || '';
                        emailInput.value = loggedInUser.email || '';
                    }
                    showPage('transaction-menu-page');
                });
            }

            // Event listener for Continue to Payment button (now triggers Razorpay)
            if (continueToPaymentBtn) {
                continueToPaymentBtn.addEventListener('click', () => {
                    // Simple validation for required address fields
                    const fullName = fullNameInput.value.trim();
                    const email = emailInput.value.trim();
                    const addressLine1 = addressLine1Input.value.trim();
                    const addressLine2 = addressLine2Input.value.trim(); // Keep for email
                    const city = cityInput.value.trim();
                    const state = stateInput.value.trim();
                    const pincode = pincodeInput.value.trim();
                    const phoneNumber = phoneNumberInput.value.trim();

                    // Email Validation: Check for @ and . after @
                    const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
                    if (!emailRegex.test(email)) {
                        showToast("Please enter a valid email address (e.g., user@example.com).");
                        return;
                    }

                    // Phone Number Validation: Must start with +91 and have 10 digits after
                    const phoneRegex = /^\+91\d{10}$/;
                    if (!phoneRegex.test(phoneNumber)) {
                        showToast("Please enter a valid Indian phone number starting with +91 followed by 10 digits (e.g., +919876543210).");
                        return;
                    }

                    if (fullName === '' || addressLine1 === '' || city === '' || state === '' || pincode === '') {
                        showToast("Please fill in all required address fields.");
                        return;
                    }

                    // All validations passed, proceed with Razorpay
                    const orderDetails = {
                        fullName: fullName,
                        email: email,
                        addressLine1: addressLine1,
                        addressLine2: addressLine2,
                        city: city,
                        state: state,
                        pincode: pincode,
                        phoneNumber: phoneNumber,
                        cartItems: cartItems.map(item => ({
                            name: item.name,
                            price: item.price,
                            quantity: item.quantity
                        })),
                        subtotal: cartItems.reduce((sum, item) => sum + (item.price * item.quantity), 0),
                        shippingCost: SHIPPING_CHARGE,
                        totalAmount: cartItems.reduce((sum, item) => sum + (item.price * item.quantity), 0) + SHIPPING_CHARGE,
                        orderDate: new Date().toLocaleString(),
                        paymentStatus: 'Pending' // Initial status
                    };

                    const razorpayAmount = orderDetails.totalAmount * 100; // Amount in paise

                    const options = {
                        key: "rzp_test_ZxlY5x1fQ5Axse", // Your Razorpay Key - UPDATE THIS IF YOU HAVE A DIFFERENT KEY
                        amount: razorpayAmount,
                        currency: "INR",
                        name: "Inkémon",
                        description: "Order from Inkémon",
                        handler: async function (response) {
                            console.log("Payment success", response);
                            // Update payment status to successful
                            orderDetails.paymentStatus = 'Paid';
                            orderDetails.razorpayPaymentId = response.razorpay_payment_id;
                            orderDetails.razorpayOrderId = response.razorpay_order_id;
                            orderDetails.razorpaySignature = response.razorpay_signature;

                            // Send email on successful payment
                            sendEmail(orderDetails);
                            // Save order details to Firestore
                            await saveOrderToFirestore(orderDetails);
                            
                            // Clear cart and redirect after successful payment and email attempt
                            cartItems = [];
                            await saveCartToFirestore(); // Save empty cart for the user
                            updateCartCount();
                            renderCartItems();
                            showPage('home-page');
                        },
                        prefill: {
                            name: orderDetails.fullName,
                            email: orderDetails.email,
                            contact: orderDetails.phoneNumber,
                        },
                        theme: {
                            color: "#3399cc"
                        },
                        modal: {
                            ondismiss: function() {
                                showToast('Payment was cancelled or failed. Please try again.');
                                // Optionally, send orderDetails with 'Cancelled' status to backend here (if you were using backend for orders)
                                // For now, no action needed on dismiss if not saving to DB.
                            }
                        }
                    };

                    const rzp = new Razorpay(options);
                    rzp.open();
                });
            }

            // Event listener for Back to Cart button
            if (backToCartBtn) {
                backToCartBtn.addEventListener('click', () => {
                    showPage('cart-page');
                });
            }

            // Admin Panel Login
            if (adminLoginBtn) {
                adminLoginBtn.addEventListener('click', async () => {
                    const password = adminPasswordInput.value;
                    const correctPassword = "rudsatpra123"; // Admin password

                    if (password === correctPassword) {
                        adminLoginSection.classList.add('hidden');
                        adminContentSection.classList.remove('hidden');
                        showToast("Admin login successful!");
                        await renderAdminOrders();
                    } else {
                        showToast("Incorrect admin password.");
                        adminPasswordInput.value = ''; // Clear password
                    }
                });
            }

            // Initialize to show the home page and set active link
            showPage('home-page');
            updateCartCount(); // Initialize cart count on load
        });
    </script>

</body>
</html>
